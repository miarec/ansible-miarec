# -------------------------------------------------
# Firewall configuration for Recorder server
# -------------------------------------------------
iptables_keep_unmanaged: yes
iptables_custom_rules:
  - name: open_rest_api
    rules: '-A INPUT -p tcp --dport 6088 -j ACCEPT'
    state: present
  - name: open_live_monitoring_signaling
    rules: '-A INPUT -p tcp --dport 6554 -j ACCEPT'
    state: present
  - name: open_live_monitoring_rtp
    rules: '-A INPUT -p udp --dport 7000:7999 -j ACCEPT'
    state: present
  - name: open_siprec_signaling_tcp
    rules: '-A INPUT -p tcp --dport 5080 -j ACCEPT'
    state: present
  - name: open_siprec_signaling_ucp
    rules: '-A INPUT -p udp --dport 5080 -j ACCEPT'
    state: present
  - name: open_siprec_rtp
    rules: '-A INPUT -p udp --dport 22000:23999 -j ACCEPT'
    state: present
  - name: open_ciscobib_signaling_tcp
    rules: '-A INPUT -p tcp --dport 5070 -j ACCEPT'
    state: present
  - name: open_ciscobib_signaling_ucp
    rules: '-A INPUT -p udp --dport 5070 -j ACCEPT'
    state: present
  - name: open_ciscobib_rtp
    rules: '-A INPUT -p udp --dport 20000:21999 -j ACCEPT'
    state: present

miarec_redis_host: "{{ hostvars[groups['redis'][0]].ansible_eth1.ipv4.address }}"
miarec_db_host: "{{ hostvars[groups['db'][0]].ansible_eth1.ipv4.address }}"
