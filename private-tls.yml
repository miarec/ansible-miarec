# ------------------------------------------------
# Create SelfSigned Certificate for intra cluster traffic
# ------------------------------------------------
- name: Generate Private TLS config
  hosts:
    - all

  pre_tasks:

    - set_fact:
        openssl_root: "{{ groups.db.0 }}"
        openssl_clients: "{{ groups.db + groups.recorder}}"

  roles:
    - role: 'private-tls'

  # vars_files:
  #   - vars/web.yml
  # roles:
  #   - role: 'letsencrypt'
  # tags: 'letsencrypt'

